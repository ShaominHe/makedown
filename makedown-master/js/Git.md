### Git

在实际工作中，我们会遇到很多无法预料的问题

问题一：频繁改需求

```
项目开发好之后，形成版本v1.0
需求改变：
在v1.0的基础上添加功能A，形成版本v1.1 - 在上个版本的基础上添加功能A
在V1.0的基础上添加功能B，形成版本V1.2 - 在上个版本的基础上删除功能A，添加功能B
在v1.1的基础上添加功能C，形成版本v1.3 - 在上个版本的基础上删除功能B，添加功能A，在添加功能C
在v1.2的基础上添加功能D，形成版本v1.4 - 上个版本的基础上删除功能A，删除功能C，添加功能B，添加功能D
```

git可以完美的解决这个删除添加的过程，因为git可以将每个版本保存下来，可以很轻松的将当前版本切换到之前的某个版本。

问题二：不小心将文件删除了，还需要重新写

使用git的话，如果将某个文件删除，形成新的版本，也可以很轻松的切换到之前的版本，将删除的文件找回来

问题三：在当前电脑开发好的内容，换了一台电脑，发现代码还需要重新写

使用git的话，将每次写好的代码，上传到github网站，只要有网就能下载，相当于备份

问题四：工作中每个人写好的文件最后需要合并到一个大文件中，需要很繁琐的复制粘贴

使用git可以很轻松的进行文件合并

#### Git和GitHub使用

##### 本地仓库

下载安装，检测是否安装成功

```
git --verson
```

**初始化**：

```
git init
```

如果在文件夹中能看到一个叫做 .git的文件夹，说明这个文件夹已经是一个仓库了

初始化的时候会将仓库划分出了区域
工作区：一般情况工作区放的是正在开发的代码
暂存区：暂时存放文件的地方-后期都需要存到一个合适的地方
历史区：已经存起来的，在仓库中的一个合适地方

**查看仓库状态**：

```
git status
```

branch   分支        master    主分支       commit   提交		

**将工作区的文件放到暂存区**

```
git  add  文件名
git  add   .    //将当前文件夹中的所有内容都添加到暂存区
```

git也能管理空文件，但是不能管理空文件夹，但是只要空文件夹内有一个文件就可以上传，哪怕是空文件，一般情况新建：`.gitkeep`，这个文件没有实际意义，这是为了占位，让空文件夹能被管理的标识，以后要在文件夹中写文件的时候，这个文件可以被删除
让某些文件或者文件夹被忽略管理：
在和`.git`同级的位置，新建文件：`.gitignore`，在这个 文件中书写要忽略的内容:
直接写文件名，代表要忽略的是哪个文件
写文件夹路径，表示要忽略得到是哪个文件夹
*.后缀，表示要忽略的是所有后缀为指定后缀的文件

**将暂存区的文件拉回工作区**

```
git reset HEAD -- 文件名
git reset HEAD -- .
```

**将暂存区的内容放到历史区，形成一个版本**

```
git commit -m "版本的描述" //将暂存区的所有内容放到历史区形成版本
```

**查看版本**

```
git log   //查看所有的版本信息
```

**回退到以前的版本**

```
git reset --hard^   //回到上一个版本
git reset --hard^^   //回到上两个版本，几个^回退几个版本
git reset --hard 版本号   //去到指定版本
```



##### 远程仓库

在GitHub上创建远程仓库

使用https上传：
添加上传地址：

```
git remote add origin
https://github.com/heshaomin971019/item.git   #其中的origin是变量名表示上传地址，可以自定义
```

开始上传：

```
git push -u origin master #其中的origin是表示地址的那个变量名
```

首次推送远程需要输入用户名和密码。
第二次上传的时候只需要：`git  push`

将远程代码拉去到本地：（需先新建一个文件夹作为git 管理的文件夹）

```
git clone   远程仓库地址
```

将本地代码和远程代码同步:(在本地仓库使用命令)

```
git pull
```



##### 分支

主分支-放测试号的项目-马上面临上线的项目

创建分支：

```
git  branch   分支名
```

查看分支：

```
git branch
```

查看到了所有的分支，前面带*的表示当前使用的分支

切换分支：

```
git checkout  分支名
```

本地仓库创建的分支，往远程仓库的这个分支去提交，但是远程仓库没有这个分支，会自动创建分支，但是如果本地仓库名和远程的仓库名不对应进行提交，会报错。

例：本地创建分支index分支，远程仓库没有index分支。本地仓库index往远程仓库的master提交，提交失败会报错，提交其他的分支，不报错，但是提交不成功

所以本地分支和远程分支一致才能推送成功 

本地仓库的文件会随着分支的切换而改变



新建并切换到这个分支：

```
git checkout -b 新的分支名
```

删除文件

```
rm -rf  文件名
```

合并分支

```
git merge  要合并的分支
```

主分支可以和别的分支合并，别的分支可以非主分支的分支进行合并，别的分支不能和主分支合并

删除分支：（不能自己删除自己）

```
git branch -D 其他分支名
```

不能自己删自己，主分支也可以删除



##### 冲突

冲突解决：

1. 使用命令让本地和远程同步：

   ```shell
   git pull
   ```

   然后手动解决文件冲突

   

2. 开辟新的分支，然后进行分支合并

   ```shell
   git fetch origin master:tmp # 使用 fetch 获取远程最新信息并开辟一个临时分支
   git diff tmp # 将当前分支和远程分支进行对比
   git merge tmp # 将临时分支合并到当前分支
   git push
   ```

   